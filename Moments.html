<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <link rel="stylesheet" href="nav.css">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>生活圈</title>
<style>
body {
    margin:0;
    font-family:"Helvetica Neue","PingFang SC","Microsoft YaHei",sans-serif;
    background:#f5f5f5;
    display:flex;
    flex-direction:column;
    height:100vh;
    color:#333;
}

header {
    position:relative;
    background:#ededed;
    padding:12px 16px;
    border-bottom:1px solid #dcdcdc;
    display:flex;
    align-items:center;
}

header h1 {
    position:absolute;
    left:50%;
    transform:translateX(-50%);
    margin:0;
    font-size:18px;
}

#backBtn {
    background:none;
    border:none;
    cursor:pointer;
    color:#333;
}

main {
    flex:1;
    padding:16px;
    overflow:auto;
}

.moments-list {
    max-width:720px;
    margin:0 auto;
    display:flex;
    flex-direction:column;
    gap:12px;
}

.moment {
    background:#fff;
    padding:12px 14px;
    border-radius:10px;
    box-shadow:0 2px 6px rgba(0,0,0,0.06);
}

.moment .user {
    font-weight:600;
    margin-bottom:6px;
}

.moment .time {
    font-size:12px;
    color:gray;
    margin-top:6px;
}

.hint {
    background:#fff;
    padding:14px;
    border-radius:8px;
    box-shadow:0 2px 6px rgba(0,0,0,0.06);
    max-width:720px;
    margin:8px auto;
    text-align:center;
}

.nav-btn.active {
    background:#cccccc;
    font-weight:600;
}
</style>
</head>
<body>

<header>
  <button id="backBtn" onclick="location.href='VX_00.html'">← 返回</button>
  <h1>生活圈</h1>
</header>

<main id="main"></main>

<footer>
    <a class="nav-btn" id="nav-msg" href="VX_00.html">消息</a>
    <a class="nav-btn" id="nav-contacts" href="#">通讯录</a>
    <a class="nav-btn active" id="nav-moments" href="#">生活圈</a>
    <a class="nav-btn" id="nav-me" href="#">我</a>
</footer>

<script>
(function(){
  const main = document.getElementById('main');
  const currentUser = localStorage.getItem("currentUser") || "";

  if(!currentUser){
    alert("请先登录才能查看生活圈！");
    main.innerHTML = '<div class="hint">未登录用户无法查看动态</div>';
    document.getElementById('nav-me').onclick = e=>{e.preventDefault();location.href='Me.html'};
    return;
  }

  // 根据不同账号显示不同动态
  const momentsMapping = {
    "xixi2333": [
      {user:"小盼宝宝", content:"今天去公园玩耍，心情很好！", time:"2小时前"},
      {user:"官谷店", content:"新出的蛋糕真好吃~", time:"5小时前"},
      {user:"小云", content:"完成了新的手工项目，开心！", time:"昨天"}
    ],
    "PAN1108": [
      {user:"小希", content:"今天完成了训练任务，好累啊", time:"1小时前"},
      {user:"妈妈", content:"做了美味的晚餐，大家快来吃~", time:"3小时前"},
      {user:"弟弟", content:"打通了游戏副本，好开心！", time:"昨天"}
    ]
  };

  const moments = momentsMapping[currentUser] || [];

  if(moments.length === 0){
    main.innerHTML = '<div class="hint">暂无动态</div>';
    return;
  }

  const list = document.createElement('div');
  list.className = 'moments-list';

  moments.forEach(m=>{
    const div = document.createElement('div');
    div.className = 'moment';
    div.innerHTML = `
      <div class="user">${m.user}</div>
      <div class="content">${m.content}</div>
      <div class="time">${m.time}</div>
    `;
    list.appendChild(div);
  });

  main.appendChild(list);

  // 底部导航跳转
  document.getElementById('nav-contacts').onclick = e=>{e.preventDefault();location.href='FriendList.html'};
  document.getElementById('nav-me').onclick = e=>{e.preventDefault();location.href='Me.html'};
})();
</script>

</body>
</html>
